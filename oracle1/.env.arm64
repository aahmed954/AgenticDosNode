# Oracle Ampere CPU (ARM64) Specific Configuration
# This file contains optimizations for Oracle Cloud Infrastructure ARM64 instances

# PostgreSQL ARM64 Optimizations
POSTGRES_SHARED_BUFFERS=2GB
POSTGRES_EFFECTIVE_CACHE_SIZE=6GB
POSTGRES_MAINTENANCE_WORK_MEM=512MB
POSTGRES_WAL_BUFFERS=16MB
POSTGRES_DEFAULT_STATISTICS_TARGET=100
POSTGRES_RANDOM_PAGE_COST=1.1
POSTGRES_EFFECTIVE_IO_CONCURRENCY=200
POSTGRES_WORK_MEM=10MB
POSTGRES_HUGE_PAGES=try
POSTGRES_MAX_CONNECTIONS=200

# Redis ARM64 Optimizations
REDIS_MAX_MEMORY=2gb
REDIS_MAX_MEMORY_POLICY=allkeys-lru
REDIS_TCP_BACKLOG=511
REDIS_TCP_KEEPALIVE=300
REDIS_TIMEOUT=0
REDIS_DATABASES=16

# n8n Performance Settings for ARM64
N8N_WORKER_THREADS=4
N8N_PAYLOAD_SIZE_MAX=64
N8N_METRICS=true
N8N_METRICS_PREFIX=n8n_
NODE_OPTIONS="--max-old-space-size=4096"

# Kong ARM64 Optimizations
KONG_MEM_CACHE_SIZE=256m
KONG_NGINX_WORKER_PROCESSES=auto
KONG_NGINX_WORKER_CONNECTIONS=16384
KONG_UPSTREAM_KEEPALIVE_POOL_SIZE=60
KONG_UPSTREAM_KEEPALIVE_MAX_REQUESTS=100
KONG_UPSTREAM_KEEPALIVE_IDLE_TIMEOUT=60

# Qdrant ARM64 Settings
QDRANT__SERVICE__MAX_REQUEST_SIZE_MB=32
QDRANT__SERVICE__MAX_WORKERS=8
QDRANT__SERVICE__HTTP_API_ENABLED=true
QDRANT__STORAGE__PERFORMANCE__MEMMAP_THRESHOLD_KB=20000
QDRANT__STORAGE__PERFORMANCE__INDEXING_THRESHOLD=10000
QDRANT__STORAGE__PERFORMANCE__FLUSH_INTERVAL=5

# Oracle Cloud ARM64 Instance Recommendations
# A1.Flex instances: Use 4 OCPUs minimum for production
# Memory: Allocate 24GB RAM minimum for this stack
# Storage: Use block volumes with higher IOPS for database storage
# Network: Enable security list rules for all exposed ports

# Container Runtime Optimizations
DOCKER_BUILDKIT=1
COMPOSE_DOCKER_CLI_BUILD=1
BUILDKIT_INLINE_CACHE=1

# ARM64 Specific Build Arguments
TARGETPLATFORM=linux/arm64
BUILDPLATFORM=linux/arm64
TARGETARCH=arm64